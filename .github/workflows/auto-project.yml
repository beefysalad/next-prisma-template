name: Auto Add to Projects

on:
  issues:
    types: [opened, labeled]

permissions:
  issues: write
  repository-projects: write

jobs:
  add-to-project:
    runs-on: ubuntu-latest
    steps:
      - name: Add issue to project board
        uses: actions/github-script@v7
        with:
          script: |
            const issue = context.payload.issue;

            // TODO: Configure your GitHub Project
            // To find your project ID:
            // 1. Go to your project board
            // 2. Click on the "..." menu
            // 3. Click "Settings"
            // 4. The project ID is in the URL: github.com/users/USERNAME/projects/PROJECT_ID

            const projectConfig = {
              enabled: false, // Set to true after configuring
              // owner: 'beefysalad', // Your GitHub username or org
              // projectNumber: 1, // Your project number
            };

            if (!projectConfig.enabled) {
              console.log('Project integration is disabled. Configure projectConfig to enable.');
              return;
            }

            // This is a placeholder for GitHub Projects v2 integration
            // You'll need to use the GraphQL API for Projects v2

            const query = `
              mutation($projectId: ID!, $contentId: ID!) {
                addProjectV2ItemById(input: {projectId: $projectId, contentId: $contentId}) {
                  item {
                    id
                  }
                }
              }
            `;

            // Note: You'll need to get the project ID using GraphQL first
            // This is a simplified example

            console.log(`Would add issue #${issue.number} to project board`);
            console.log('Please configure the project settings in this workflow file.');

            // Example comment to notify about project addition
            // await github.rest.issues.createComment({
            //   owner: context.repo.owner,
            //   repo: context.repo.repo,
            //   issue_number: issue.number,
            //   body: 'ðŸ“‹ This issue has been added to the project board.'
            // });
